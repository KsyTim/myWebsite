"use strict";const debounce=(func,time=100)=>{let timer;return function(e){clearTimeout(timer),timer=setTimeout(func,time,e)}};class website{constructor(element){this.document=element,this.menuMobile=this.document.querySelector(".menu-mobile"),this.lines=this.document.querySelectorAll(".menu-mobile-item"),this.experience=this.document.querySelectorAll(".experience-slide"),this.experienceModalOverlay=this.document.querySelector(".modal-experience .overlay"),this.subContentSlide=this.document.querySelectorAll(".sub-content-slide"),this.contentSlide=this.document.querySelectorAll(".content-slide"),this.projectsContainer=this.document.querySelector(".projects-container"),this.slider=this.projectsContainer.querySelector(".slider"),this.descriptions=this.document.querySelectorAll(".projects-content-description"),this.currentSlide=0,this.size=this.slider.childElementCount,this.currentSlideWasChanged=!1,this.elements=this.slider.querySelectorAll(".slide"),this.menu=this.document.getElementById("top-arrow"),this.result=this.document.querySelector(".header"),this.welcome=this.document.getElementById("about"),this.toTopArrow=this.document.getElementById("totop"),this.moving=!1,this.input=this.document.querySelectorAll("input"),this.textarea=this.document.querySelector("textarea"),this.name=this.document.getElementById("name"),this.email=this.document.getElementById("email"),this.message=this.document.getElementById("message"),this.langItem=this.document.querySelectorAll(".lang-item"),this.contactFormItem=this.document.querySelectorAll(".contact-form-item"),this.fillFormMessage=this.document.querySelector(".contact-form-fill"),this.mobileMenuBehaviour=this.mobileMenuBehaviour.bind(this),this.removeActiveExperienceClasses=this.removeActiveExperienceClasses.bind(this),this.overlayVisible=this.overlayVisible.bind(this),this.overlayHidden=this.overlayHidden.bind(this),this.setEvents=this.setEvents.bind(this),this.removeActiveClass=this.removeActiveClass.bind(this),this.openSlide=this.openSlide.bind(this),this.switchSlide=this.switchSlide.bind(this),this.setParameters=this.setParameters.bind(this),this.doSlideAbsolutePosition=this.doSlideAbsolutePosition.bind(this),this.doSlideTransparent=this.doSlideTransparent.bind(this),this.forwardSlide=this.forwardSlide.bind(this),this.backSlide=this.backSlide.bind(this),this.resizeGallery=this.resizeGallery.bind(this),this.startDrag=this.startDrag.bind(this),this.stopDrag=this.stopDrag.bind(this),this.dragging=this.dragging.bind(this),this.clickDots=this.clickDots.bind(this),this.changeActiveDotClass=this.changeActiveDotClass.bind(this),this.changeCurrentSlide=this.changeCurrentSlide.bind(this),this.autoplay=this.autoplay.bind(this),this.autoplayStop=this.autoplayStop.bind(this),this.changeDescription=this.changeDescription.bind(this),this.hugeScreen=this.hugeScreen.bind(this),this.smallScreen=this.smallScreen.bind(this),this.smoothScrollToSection=this.smoothScrollToSection.bind(this),this.scrollMenu=this.scrollMenu.bind(this),this.arrowToTop=this.arrowToTop.bind(this),this.scrollToTopHugeSmallScreen=this.scrollToTopHugeSmallScreen.bind(this),this.animateArrowTopScrolling=this.animateArrowTopScrolling.bind(this),this.sending=this.sending.bind(this),this.sendMail=this.sendMail.bind(this),this.touchesStart=this.touchesStart.bind(this),this.touchesMove=this.touchesMove.bind(this),this.init=this.init.bind(this),this.setLanguage=this.setLanguage.bind(this),this.setLanguageActiveClass=this.setLanguageActiveClass.bind(this),this.emptyCheck=this.emptyCheck.bind(this),this.fillForm=this.fillForm.bind(this),this.x1=null,this.y1=null}init(){this.setLanguageActiveClass(),this.switchSlide(),this.resizeGallery(),this.setEvents()}mobileMenuBehaviour(){this.menuMobile.classList.toggle("visible"),this.lines.forEach((elem,index)=>{elem.classList.toggle("close"),0===index?elem.classList.toggle("close_1st"):1===index?elem.classList.toggle("close_2nd"):2===index&&elem.classList.toggle("close_3rd")})}removeActiveExperienceClasses(){this.experience.forEach(elem=>{elem.classList.remove("experience-active")})}overlayVisible(){this.experienceModalOverlay.style.cssText="\n      opacity: 1;\n      visibility: visible\n    "}overlayHidden(){this.experienceModalOverlay.style.cssText="\n      opacity: 0;\n      visibility: hidden\n    "}removeActiveClass(){this.subContentSlide.forEach(elem=>{elem.classList.remove("sub-active")})}openSlide(){this.contentSlide.forEach(elem=>{this.subContentSlide.forEach(item=>{item.classList&&"sub-active"===item.classList[1]&&(elem.classList.remove("content-active"),elem.getAttribute("alt")===item.getAttribute("data-info")&&elem.classList.add("content-active"))})})}switchSlide(){this.openSlide(),this.contentSlide.forEach(elem=>{this.subContentSlide.forEach(item=>{item.addEventListener("click",()=>{this.removeActiveClass(),item.classList.add("sub-active"),elem.classList.remove("content-active"),this.openSlide()})})})}setParameters(){this.containerWidth=this.document.querySelector(".wrapper").getBoundingClientRect().width,this.containerHeight=0,this.elements.forEach(elem=>{this.containerHeight+=elem.getBoundingClientRect().height}),this.slider.style.cssText=`\n        width: ${this.containerWidth-100}px;\n        height: ${.45*this.containerWidth}px;\n      `,this.doSlideAbsolutePosition();let hasArrows=this.projectsContainer.querySelector(".projects-arrows"),hasDots=this.projectsContainer.querySelector(".projects-dots");if(!hasArrows||!hasDots){this.slider.insertAdjacentHTML("beforeend",'\n        <div class="projects-arrows">\n          <button class="projects-arrow-left"></button>\n          <button class="projects-arrow-right"></button>\n        </div>\n      '),this.projectsContainer.insertAdjacentHTML("beforeend",'\n        <div class="projects-dots"></div>\n      '),this.dots=this.projectsContainer.querySelector(".projects-dots");for(let i=0;i<this.size;i++)this.dots.insertAdjacentHTML("beforeend",`<button class="projects-dot ${i===this.currentSlide?"projects-dot-active":""}"></button>`);this.dot=this.dots.querySelectorAll(".projects-dot"),this.arrowLeft=this.projectsContainer.querySelector(".projects-arrow-left"),this.arrowRight=this.projectsContainer.querySelector(".projects-arrow-right"),this.changeActiveDotClass()}}doSlideTransparent(){this.elements.forEach(elem=>{elem.classList.add("transparent")})}doSlideAbsolutePosition(){this.elements.forEach(elem=>{elem.style.position="absolute"})}backSlide(){this.doSlideTransparent(),this.currentSlideWasChanged?this.currentSlide--:this.currentSlide=0,this.currentSlide<this.size&&this.currentSlide>=0?(this.elements[this.currentSlide].classList.remove("transparent"),this.currentSlideWasChanged=!0):this.currentSlide<0&&(this.currentSlide=this.size-1,this.elements[this.currentSlide].classList.remove("transparent"),this.currentSlideWasChanged=!0),this.changeActiveDotClass(),this.changeDescription()}forwardSlide(){this.doSlideTransparent(),this.currentSlideWasChanged?this.currentSlide++:this.currentSlide=0,this.currentSlide<this.size?(this.elements[this.currentSlide].classList.remove("transparent"),this.currentSlideWasChanged=!0):this.currentSlide>=this.size&&(this.currentSlide=0,this.elements[this.currentSlide].classList.remove("transparent"),this.currentSlideWasChanged=!0),this.changeActiveDotClass(),this.changeDescription()}resizeGallery(){this.document.querySelector("body").getBoundingClientRect().width<1200?(this.setParameters(),this.smallScreen()):this.document.querySelector("body").getBoundingClientRect().width>=1200&&(this.setParameters(),this.hugeScreen())}startDrag(position){this.clickX=position.pageX,this.slider.classList.add("draggable"),window.addEventListener("pointermove",this.dragging)}stopDrag(){window.removeEventListener("pointermove",this.dragging),this.slider.classList.remove("draggable")}dragging(position){this.dragX=position.pageX;const dragShift=this.dragX-this.clickX;dragShift>20&&dragShift>0&&this.backSlide(),dragShift<-20&&dragShift<0&&this.forwardSlide()}clickDots(e){e.preventDefault();const dot=e.target.closest("button");if(!dot)return;let dotNumber;for(let i=0;i<this.dot.length;i++)if(this.dot[i]===dot){dotNumber=i;break}dotNumber!==this.currentSlide&&(this.currentSlide=dotNumber,this.changeActiveDotClass(),this.changeCurrentSlide(),this.document.documentElement.offsetWidth<570&&this.autoplay())}changeActiveDotClass(){for(let i=0;i<this.dot.length;i++)this.dot[i].classList.remove("projects-dot-active");this.dot[this.currentSlide].classList.add("projects-dot-active"),this.changeDescription()}changeCurrentSlide(){this.doSlideTransparent(),this.elements[this.currentSlide].classList.remove("transparent")}autoplay(time=2e3){this.interval=setInterval(this.forwardSlide,time)}autoplayStop(){clearInterval(this.interval)}changeDescription(){this.projectsContainer.querySelector(".descriptions")&&(this.descriptions.forEach(elem=>{elem.classList.add("descriptions-hidden")}),this.descriptions[this.currentSlide].classList.remove("descriptions-hidden"))}hugeScreen(){this.arrowLeft.classList.remove("projects-arrow-left-small"),this.arrowRight.classList.remove("projects-arrow-right-small"),this.descriptions.forEach(elem=>{elem.classList.remove("descriptions-hidden")}),this.descriptions.forEach(elem=>{elem.classList.remove("descriptions-adaptive"),elem.style.width="60%",elem.querySelectorAll(".projects-content-text").forEach(item=>{item.style.margin="5% 0 10%"})}),this.projectsContainer.querySelector(".descriptions")&&(this.descriptions.forEach(elem=>{elem.classList.add("descriptions-hidden")}),this.currentSlide>=0&&this.currentSlideWasChanged?(this.descriptions[this.currentSlide].classList.remove("descriptions-hidden"),this.descriptions.forEach(elem=>{elem.classList.add("projects-content-description-small")})):0===this.currentSlide&&!1===this.currentSlideWasChanged&&this.descriptions[this.descriptions.length-1].classList.remove("descriptions-hidden"))}smallScreen(){this.slider.style.cssText=`\n      width: ${this.containerWidth}px;\n      height: ${.55*this.containerWidth}px;\n    `,this.arrowLeft.classList.add("projects-arrow-left-small"),this.arrowRight.classList.add("projects-arrow-right-small");let descriptionsSection=this.document.createElement("div");descriptionsSection.classList.add("descriptions"),this.projectsContainer.querySelector(".descriptions")||this.projectsContainer.appendChild(descriptionsSection),this.descriptions.forEach(elem=>{this.document.querySelector(".descriptions").insertAdjacentElement("beforeend",elem),elem.classList.add("descriptions-adaptive"),elem.style.width="100%",elem.querySelectorAll(".projects-content-text").forEach(item=>{item.style.margin="3% 0 5%"})}),this.projectsContainer.querySelector(".descriptions")&&(this.descriptions.forEach(elem=>{elem.classList.add("descriptions-hidden")}),this.currentSlide>=0&&this.currentSlideWasChanged?(this.descriptions[this.currentSlide].classList.remove("descriptions-hidden"),this.descriptions.forEach(elem=>{elem.classList.remove("projects-content-description-small")})):0===this.currentSlide&&!1===this.currentSlideWasChanged&&this.descriptions[this.descriptions.length-1].classList.remove("descriptions-hidden"))}smoothScrollToSection(event){const id=event.target.getAttribute("href").substr(1),scrollTo=this.document.getElementById(id),elemPosition=scrollTo.getBoundingClientRect().top;window.scrollBy({top:elemPosition,behavior:"smooth"})}scrollMenu(){this.document.documentElement.offsetWidth<=740?(this.menu.getBoundingClientRect().top<0&&(this.menu.classList.add("menu-fixed"),this.menu.insertAdjacentHTML("beforeend",'<div class="experience-extra-bg menu-fixed-bg"></div>')),0===this.document.getElementById("about").getBoundingClientRect().top&&(this.menu.classList.remove("menu-fixed"),this.document.querySelector(".menu-fixed-bg").remove())):(this.document.querySelector(".menu-fixed-bg")&&this.document.querySelector(".menu-fixed-bg").remove(),this.menu.classList.remove("menu-fixed"))}arrowToTop(elem){const scrollTo=this.document.getElementById(elem),elemPosition=scrollTo.getBoundingClientRect().top;setTimeout(()=>{window.scrollBy({top:elemPosition,behavior:"smooth"})},1e3)}displayArrowToTop=elem=>{elem.getBoundingClientRect().top<0&&(this.toTopArrow.style.display="block"),elem.getBoundingClientRect().top>=0&&(this.toTopArrow.style.display="none")};scrollToTopHugeSmallScreen(){this.document.documentElement.offsetWidth<=740?this.displayArrowToTop(this.welcome):this.displayArrowToTop(this.result)}animateArrowTopScrolling(){!1===this.moving&&(this.moving=!0,this.toTopArrow.classList.add("active"),setTimeout(()=>{this.toTopArrow.classList.remove("active"),this.moving=!1},1e3))}emptyCheck(event){let mark;this.contactFormItem.forEach(item=>{mark=!!item.value}),mark?this.sendMail(event):this.fillForm()}fillForm(){this.fillFormMessage.style.display="block","ru"===window.location.search.substr(6)?this.fillFormMessage.textContent="Пожалуйста, заполните все поля формы!":this.fillFormMessage.textContent="Please fill in the form!"}sending=resp=>{this.contactFormItem.forEach(elem=>{elem.value=""}),this.statusMessage.style.backgroundColor="rgba(37, 32, 47, 0.85)",this.statusMessage.innerHTML=`${resp}`,this.fillFormMessage.style.display="none",this.fillFormMessage.textContent="",setTimeout(()=>{this.statusMessage.style.backgroundColor="transparent",this.statusMessage.innerHTML="",this.statusMessage.remove()},3e3)};sendMail=event=>{const data=JSON.stringify({name:this.name.value,email:this.email.value,message:this.message.value}),statusMessage=this.document.createElement("div");if(statusMessage.classList.add("status-message"),"form"===event.target.tagName.toLowerCase()){event.target.insertAdjacentElement("beforeend",statusMessage);const animationLoading='\n        <div class="status-dots">\n          <div class="status-dot status-dot-first"></div>\n          <div class="status-dot status-dot-second"></div>\n        </div>\n      ';statusMessage.insertAdjacentHTML("beforeend",animationLoading),this.statusMessage=this.document.querySelector(".status-message"),fetch("./sendMail.php",{method:"POST",body:data}).then(response=>{const enResponse="Thank you!<br>I will contact you as soon as possible!",ruResponse="Благодарю Вас!<br>Я свяжусь с Вами в ближайшее время!";if(!response.ok)throw new Error("status network is not 200");"ru"===window.location.search.substr(6)?this.sending(ruResponse):this.sending(enResponse)}).catch(error=>{console.error(error)})}};touchesStart(event){const firstTouch=event.touches[0];this.x1=firstTouch.clientX,this.y1=firstTouch.clientY}touchesMove(event){if(!this.x1||!this.y1)return!1;this.x2=event.touches[0].clientX,this.y2=event.touches[0].clientY;let xDiff=this.x2-this.x1,yDiff=this.y2-this.y1;Math.abs(xDiff)>Math.abs(yDiff)&&(xDiff>0?this.backSlide():this.forwardSlide()),this.x1=null,this.y1=null}setLanguage(event){location.href=`${window.location.pathname}?lang=${event.target.closest("a").getAttribute("data-lang")}`}setLanguageActiveClass(){let value=window.location.search?window.location.search.match(/\=(\w)+/g)[0].substr(1):"en";this.langItem.forEach(elem=>elem.classList.remove("active")),this.document.querySelector(`[data-lang=${value}]`).classList.add("active")}setEvents(){this.document.addEventListener("click",event=>{const target=event.target;if(target.matches(".menu-mobile-btn")||target.matches(".menu-mobile-container")||target.matches(".menu-mobile-item"))this.mobileMenuBehaviour();else if(target.matches(".experience-header-achievements-button")||target.matches("#experience-header-achievements-button")||target.matches(".experience-header-achievements-text"))event.preventDefault(),this.overlayVisible();else if(target.matches(".modal-experience .overlay-btn")||target.matches(".modal-experience .overlay-container")||target.matches(".modal-experience .overlay-item")||target.matches(".overlay")||target.matches(".overlay .container"))event.preventDefault(),this.overlayHidden();else if(target.matches(".nav-link")||target.matches(".nav-link-mobile"))target.matches(".nav-link-mobile")&&this.mobileMenuBehaviour(),event.preventDefault(),this.smoothScrollToSection(event);else if(target.matches("#totop")){const id=this.document.querySelector('[href="#top-arrow"').getAttribute("href").substr(1),idMobile=this.document.getElementById("about").getAttribute("id");event.preventDefault(),this.animateArrowTopScrolling(),this.document.documentElement.offsetWidth<=740?this.arrowToTop(idMobile):this.arrowToTop(id)}else target.matches(".projects-arrow-left")?(event.preventDefault(),this.backSlide()):target.matches(".projects-arrow-right")?(event.preventDefault(),this.forwardSlide()):target.matches(".lang-item span")&&(event.preventDefault(),this.setLanguage(event))}),this.document.documentElement.offsetWidth<570?(this.autoplayStop(),this.autoplay(),this.slider.addEventListener("touchstart",event=>{event.preventDefault(),this.autoplayStop(),this.touchesStart(event)},{passive:!1}),this.slider.addEventListener("touchmove",event=>{event.cancelable&&(event.preventDefault(),this.touchesMove(event))},{passive:!1}),this.slider.addEventListener("touchend",event=>{event.preventDefault(),this.autoplay()}),this.document.addEventListener("click",event=>{event.target.matches(".projects-dot")&&(this.autoplayStop(),this.clickDots(event))})):this.document.documentElement.offsetWidth>=570&&(this.autoplayStop(),this.autoplay(),this.slider.addEventListener("pointerdown",this.startDrag),window.addEventListener("pointerup",this.stopDrag),window.addEventListener("pointercancel",this.stopDrag),this.document.addEventListener("mouseover",e=>{(e.target.matches(".projects-arrow-right")||e.target.matches(".projects-arrow-left")||e.target.matches(".projects-dot")||e.target.matches(".slide img")||e.target.matches(".projects-content-description")||e.target.matches(".projects-content-title")||e.target.matches(".projects-content-technologies")||e.target.matches(".projects-content-more")||e.target.matches(".projects-content-button"))&&(e.preventDefault(),e.target.matches(".projects-dot")&&e.target.addEventListener("click",event=>{this.clickDots(event)}),this.autoplayStop())}),this.document.addEventListener("mouseout",e=>{(e.target.matches(".projects-arrow-right")||e.target.matches(".projects-arrow-left")||e.target.matches(".projects-dot")||e.target.matches(".slide img")||e.target.matches(".projects-content-description")||e.target.matches(".projects-content-title")||e.target.matches(".projects-content-technologies")||e.target.matches(".projects-content-more")||e.target.matches(".projects-content-button"))&&(e.preventDefault(),this.autoplay())})),window.addEventListener("scroll",()=>{this.scrollMenu(),this.scrollToTopHugeSmallScreen()}),this.debouncedResizeGallery=debounce(this.resizeGallery),window.addEventListener("resize",()=>{this.scrollMenu(),this.debouncedResizeGallery()}),this.document.addEventListener("submit",event=>{event.preventDefault(),this.emptyCheck(event)}),this.contactFormItem.forEach(elem=>{elem.addEventListener("blur",event=>{event.target.value=event.target.value.trim(),event.target.matches('[name="name"]')?(event.target.value=event.target.value.replace(/[0-9/.,\-+=_)({*&$%#@'"!~^:;?`<>№|\\})]/gi,""),event.target.value=event.target.value.replace(/ {2,}/g," ")):event.target.matches('[name="email"]')?event.target.value=event.target.value.replace(/[а-яё/, +=)({&$%#^:;?`<>№|\\})]/gi,""):event.target.matches('[name="message"]')&&(event.target.value=event.target.value.replace(/[+=)({*&$%#~^`<>№|\\})]/gi,""),event.target.value=event.target.value.replace(/ {2,}/g," "),event.target.value=event.target.value.replace(/^( *-* *)|( *-* *)$/g,""))})})}}const myWebsite=new website(document);myWebsite.init();